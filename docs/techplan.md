# ğŸ¶ ã‚†ã‚‹ã¼ï¼ˆYURUBOï¼‰ â€” æŠ€è¡“ä»•æ§˜æ›¸ï¼ˆv1.0ï¼‰

---

## 1ï¸âƒ£ ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ§‹æˆ

### ğŸŒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

```
Next.js (App Router)
â”œâ”€ Frontend (React + shadcn-ui)
â”‚   â”œâ”€ ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ / æŠ•ç¨¿ / ãƒãƒ£ãƒƒãƒˆ / ç²¾ç®—UI
â”‚   â”œâ”€ Zustand / React Query çŠ¶æ…‹ç®¡ç†
â”‚   â””â”€ Edge Functions çµŒç”±ã§AIè£œåŠ©APIå‘¼ã³å‡ºã—
â”‚
â”œâ”€ Supabase (PostgreSQL + Auth + Storage)
â”‚   â”œâ”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ï¼ˆåŒ¿ååŒ–IDä»˜ä¸ï¼‰
â”‚   â”œâ”€ ã‚¤ãƒ™ãƒ³ãƒˆãƒ»å‚åŠ ãƒ»æ”¯æ‰•ã„ãƒ†ãƒ¼ãƒ–ãƒ«
â”‚   â”œâ”€ Row-Level Security ã«ã‚ˆã‚‹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
â”‚   â””â”€ WebhookçµŒç”±ã§AIè£œåŠ©é€£æº
â”‚
â”œâ”€ OpenAI APIï¼ˆGPT-4oï¼‰
â”‚   â”œâ”€ åº—èˆ—ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰ãƒ»å€™è£œã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°
â”‚   â”œâ”€ ç²¾ç®—ãƒ­ã‚¸ãƒƒã‚¯è¨ˆç®—
â”‚   â””â”€ ãƒªãƒã‚¤ãƒ³ãƒ‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆ
â”‚
â””â”€ Google Places API
    â””â”€ åº—èˆ—å€™è£œæŠ½å‡ºï¼ˆåˆæ³•çš„åˆ©ç”¨ç¯„å›²å†…ï¼‰
```

### âš™ï¸ é–‹ç™ºç’°å¢ƒ

| é …ç›®      | å†…å®¹                                         |
| --------- | -------------------------------------------- |
| Framework | Next.js 15 (App Router)                      |
| DB        | Supabase (PostgreSQL 15)                     |
| Auth      | Supabase Auth (Magic Link + OAuth)           |
| CSS/UI    | TailwindCSS + shadcn-ui                      |
| AI é€£æº   | GPT-4o via Edge Functions                    |
| Hosting   | Vercel / Supabase Cloud                      |
| Payment   | Stripe Payment Linksï¼ˆå°†æ¥çš„ã« PayPay å¯¾å¿œï¼‰ |

---

## 2ï¸âƒ£ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä»•æ§˜

### ğŸ§± ãƒšãƒ¼ã‚¸æ§‹é€ 

| ãƒšãƒ¼ã‚¸                 | æ©Ÿèƒ½æ¦‚è¦                         |
| ---------------------- | -------------------------------- |
| `/`                    | ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼ˆåŒ¿åã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§ï¼‰ |
| `/event/:id`           | ã‚¤ãƒ™ãƒ³ãƒˆè©³ç´°ï¼ˆåŒ¿åè¡¨ç¤ºï¼‰         |
| `/my`                  | ãƒã‚¤ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆå¹¹äº‹ãƒ»å‚åŠ ä¸€è¦§ï¼‰   |
| `/chat/:eventId`       | ã‚¤ãƒ™ãƒ³ãƒˆå°‚ç”¨ãƒãƒ£ãƒƒãƒˆ             |
| `/settlement/:eventId` | ç²¾ç®—ã‚¿ãƒ–ï¼ˆå¹¹äº‹ UI å«ã‚€ï¼‰         |
| `/settings`            | é€šçŸ¥ãƒ»ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®š           |

### ğŸ’¬ çŠ¶æ…‹ç®¡ç†

- **Zustand**ï¼šè»½é‡ãªçŠ¶æ…‹ä¿æŒï¼ˆãƒ•ã‚£ãƒ«ã‚¿ãƒ»UI ã‚¹ãƒ†ãƒ¼ãƒˆãƒ»é€šçŸ¥è¨­å®šï¼‰
- **React Query**ï¼šSupabase ãƒ‡ãƒ¼ã‚¿åŒæœŸã‚­ãƒ£ãƒƒã‚·ãƒ¥
- **Server Actions**ï¼šæŠ•ç¨¿ä½œæˆãƒ»æ‰¿èªæ›´æ–°ãƒ»æ”¯æ‰•ã„ç¢ºå®š

### ğŸ“± ãƒ¢ãƒã‚¤ãƒ« UI

- ç”»é¢ä¸‹éƒ¨ï¼šãƒ•ã‚£ãƒ«ã‚¿ã‚¿ãƒ–ï¼ˆä»Šæ—¥ / ä»Šå¾Œ / å…¨ä½“ï¼‰
- å³ä¸‹ï¼šæŠ•ç¨¿ãƒœã‚¿ãƒ³ï¼ˆfloatingï¼‰
- åº—å€™è£œãƒ¢ãƒ¼ãƒ€ãƒ«ï¼šä¸Šéƒ¨=é£Ÿã¹ãƒ­ã‚°åŸ‹ã‚è¾¼ã¿ / ä¸‹éƒ¨=äºˆç´„ç¢ºèª UI
- é€šçŸ¥è¨­å®šãƒ»ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¨­å®šã¯ `/settings` ã«çµ±åˆ

---

## 3ï¸âƒ£ ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ä»•æ§˜ï¼ˆSupabaseï¼‰

### ğŸ—ƒï¸ ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆï¼ˆä¸»è¦ï¼‰

| ãƒ†ãƒ¼ãƒ–ãƒ«           | ç”¨é€”                   | ä¸»ã‚­ãƒ¼                 | ä¸»ãªåˆ—                                                                  |
| ------------------ | ---------------------- | ---------------------- | ----------------------------------------------------------------------- |
| `users`            | ãƒ¦ãƒ¼ã‚¶ãƒ¼               | `id`                   | name, anon_id, contact_info, profile, is_host                           |
| `connections`      | é–¢ä¿‚è¨­å®š               | `(user_id, target_id)` | category_flags(jsonb)                                                   |
| `events`           | ã‚¤ãƒ™ãƒ³ãƒˆ               | `id`                   | category, date_start, date_end, capacity, price_range, comment, host_id |
| `participants`     | å‚åŠ ç®¡ç†               | `(event_id, user_id)`  | status, confirmed_at                                                    |
| `stores`           | åº—èˆ—æƒ…å ±               | `event_id`             | store_name, url, start_time, confirmed_by                               |
| `payments`         | ç²¾ç®—å…¥åŠ›               | `(event_id, user_id)`  | amount, note, settled                                                   |
| `settlement_tasks` | æ”¯æ‰•ã„ã‚¿ã‚¹ã‚¯           | `id`                   | payer_id, receiver_id, amount, status                                   |
| `notifications`    | é€šçŸ¥ç®¡ç†               | `id`                   | user_id, type, payload, sent_at                                         |
| `invite_tokens`    | æ‹›å¾…ãƒˆãƒ¼ã‚¯ãƒ³ (Phase 0) | `id`                   | inviter_id, event_id, target_category, is_used, expires_at              |

### ğŸ”’ ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ï¼ˆRLSï¼‰

| ãƒ­ãƒ¼ãƒ« | å‚ç…§ç¯„å›²                               |
| ------ | -------------------------------------- |
| æŠ•ç¨¿è€… | è‡ªæŠ•ç¨¿ã‚¤ãƒ™ãƒ³ãƒˆã®ã¿æ›´æ–°å¯               |
| å‚åŠ è€… | è‡ªèº«ãŒæ‰¿èªæ¸ˆã®ã‚¤ãƒ™ãƒ³ãƒˆã®ã¿é–²è¦§å¯       |
| å¹¹äº‹   | ã‚¤ãƒ™ãƒ³ãƒˆå‚åŠ è€…æƒ…å ±é–²è¦§ãƒ»ç·¨é›†å¯         |
| AI     | ç‰¹å®š Function æ¨©é™ã®ã¿ï¼ˆèª­ã¿å–ã‚Šé™å®šï¼‰ |

### ğŸ§© Edge Functions

| é–¢æ•°å                 | å‡¦ç†æ¦‚è¦                                                                |
| ---------------------- | ----------------------------------------------------------------------- |
| `join_via_invite`      | **Phase 0ç”¨**: ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼å¾Œã€usersä½œæˆ/connectionsè¿½åŠ /participantsè¿½åŠ  |
| `recommend_stores`     | DeepSeek V3 + Google Places ã§å€™è£œç”Ÿæˆï¼ˆNon-PIIæƒ…å ±ã®ã¿é€ä¿¡ï¼‰           |
| `calculate_settlement` | TypeScriptå®Ÿè£…ï¼ˆAIä¸ä½¿ç”¨ï¼‰ï¼šå…¥åŠ›é‡‘é¡ï¼‹å‚¾æ–œã‹ã‚‰æ”¯æ‰•ã„ãƒãƒƒãƒ—ç”Ÿæˆ           |
| `send_notifications`   | é€šçŸ¥é »åº¦åˆ¶é™ã‚’è€ƒæ…®ã—ã¦é…ä¿¡                                               |
| `remind_pending`       | ç²¾ç®—æœªå®Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒªãƒã‚¤ãƒ³ãƒ‰é€ä¿¡                                         |

---

## 4ï¸âƒ£ AI è£œåŠ©ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

### ğŸ¶ åº—èˆ—ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰ï¼ˆDeepSeek V3 æ¡ç”¨ï¼‰

**ç›®çš„**ï¼šã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆã¤ã¤ã€å¹¹äº‹ãŒè¿·ã‚ãšæœ€é©åº—ã‚’é¸ã¹ã‚‹ã‚ˆã†è£œåŠ©ã€‚

**å‡¦ç†ãƒ•ãƒ­ãƒ¼**

1. `participants` â†’ å‡ºç™ºåœ°ï¼ˆhome_locationï¼‰å¹³å‡
2. **Google Places API** ã§å€™è£œæŠ½å‡ºï¼ˆé£²é£Ÿã‚«ãƒ†ã‚´ãƒªï¼‰
3. **DeepSeek V3 API** ãŒã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ï¼š
   - **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã¯ã€Œã‚¨ãƒªã‚¢ã€äºˆç®—ã€ã‚¸ãƒ£ãƒ³ãƒ«ã€åº—åã€ãªã©**å…¬é–‹æƒ…å ±ï¼ˆNon-PIIï¼‰ã®ã¿**ã‚’é€ä¿¡
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚„å€‹äººæƒ…å ±ã¯ä¸€åˆ‡é€ä¿¡ã—ãªã„
   - ã‚³ã‚¹ãƒˆ: GPT-4oæ¯”ã§å¤§å¹…ãªåœ§ç¸®

   ```
   score = rating*0.5 + (1/distance)*0.3 + price_inverse*0.2
   ```

4. ä¸Šä½ 3 ä»¶ã‚’ UI ã«è¿”å´ã€‚
   ãƒãƒƒãƒˆäºˆç´„å¯èƒ½æ¡ä»¶: `business_status="OPERATIONAL"` + `"Reserve a table"`ãƒªãƒ³ã‚¯æœ‰ã€‚

---

### ğŸ’° ç²¾ç®—ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆTypeScriptå®Ÿè£…ãƒ»AIä¸ä½¿ç”¨ï¼‰

**ç›®çš„**ï¼šè¨ˆç®—ãƒŸã‚¹ã‚’ã‚¼ãƒ­ã«ã—ã€é‡‘éŠ­å‡¦ç†ã®å…¬å¹³æ€§ã‚’æ‹…ä¿ã€‚

**é‡è¦æ–¹é‡**
- âŒ **AIã«ã‚ˆã‚‹è¨ˆç®—ã¯è¡Œã‚ãªã„**ï¼ˆãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³å›é¿ï¼‰
- âœ… **TypeScriptå®Ÿè£…ã®æœ€å°é€é‡‘å›æ•°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **

**ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **

```typescript
1. å…¨å“¡ã®æ”¯å‡ºã‚’sum()
2. å¹³å‡æ”¯å‡ºã‚’ç®—å‡ºï¼ˆå‚¾æ–œè¨­å®šé©ç”¨å¾Œï¼‰
3. å„äººã®å·®é¡ã‚’è¨ˆç®—ï¼ˆæ”¯æ‰•ã„éã/ä¸è¶³ï¼‰
4. è² å‚µæ–¹å‘ã‚’æœ€å°åŒ–ã™ã‚‹é€é‡‘ãƒãƒƒãƒ—ã‚’ç”Ÿæˆ
```

**å‡ºåŠ›ä¾‹**

```json
[
  { "from": "userB", "to": "userA", "amount": 3200 },
  { "from": "userC", "to": "userA", "amount": 1800 }
]
```

---

### ğŸ”” é€šçŸ¥ AI

**å†…å®¹è‡ªå‹•ç”Ÿæˆ**

- æ‰¿èªï¼ç¢ºå®šï¼ç²¾ç®—ãƒªãƒã‚¤ãƒ³ãƒ‰ãªã©ã‚’è‡ªç„¶æ–‡ã§ç”Ÿæˆ
- é€šçŸ¥é »åº¦åˆ¶å¾¡ï¼š1h1 ä»¶ã€1 æ—¥ 3 ä»¶
- ä¾‹ï¼šã€ŒğŸ¶ ä»Šå¤œã®é£²ã¿ä¼šã¾ã§ã‚ã¨ 30 åˆ†ã§ã™ã€‚é›†åˆå ´æ‰€ã¯æ–°å®¿ã€é­šé‡‘ æœ¬åº—ã€ã§ã™ï¼ã€

---

## 5ï¸âƒ£ å¤–éƒ¨ API çµ±åˆ

| API                  | åˆ©ç”¨å†…å®¹                      | æ³¨æ„äº‹é …                                       |
| -------------------- | ----------------------------- | ---------------------------------------------- |
| Google Places API    | åº—èˆ—å€™è£œæŠ½å‡º                  | ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¿å­˜ãƒ»å†é…ä¿¡ç¦æ­¢                       |
| DeepSeek V3 API      | åº—èˆ—ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ãƒ»æ¨è–¦        | **Non-PIIï¼ˆå…¬é–‹æƒ…å ±ï¼‰ã®ã¿é€ä¿¡**ãƒ»ä½ã‚³ã‚¹ãƒˆ      |
| Tabelog æ¤œç´¢ãƒªãƒ³ã‚¯   | åº—èˆ—ãƒšãƒ¼ã‚¸å‚ç…§                | HTML åŸ‹ã‚è¾¼ã¿å¯ï¼ˆäºˆç´„æ“ä½œã¯å¤–éƒ¨ï¼‰              |
| Stripe Payment Links | å°†æ¥çš„ãªè‡ªå‹•ç²¾ç®—              | ç¾çŠ¶ã¯ PayPayãƒ»éŠ€è¡Œæ‰‹å‹•å¯¾å¿œ                    |
| OpenAI GPT-4o        | é€šçŸ¥æ–‡é¢ç”Ÿæˆï¼ˆåº—èˆ—æ¨è–¦ã¯å»ƒæ­¢ï¼‰ | åº—èˆ—æƒ…å ±ä¿å­˜ã—ãªã„ãƒãƒªã‚·ãƒ¼é©ç”¨                 |

---

## 6ï¸âƒ£ éæ©Ÿèƒ½è¦ä»¶

| é …ç›®             | è¦ä»¶                                             |
| ---------------- | ------------------------------------------------ |
| ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£     | Supabase Auth / JWT / HTTPS å…¨é€šä¿¡æš—å·åŒ–         |
| åŒ¿åæ€§           | æŠ•ç¨¿ãƒ»ãƒãƒ£ãƒƒãƒˆåŒ¿å ID å¤‰æ›ãƒ¬ã‚¤ãƒ¤ãƒ¼               |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹   | LCP 2.5s ä»¥ä¸‹ï¼ˆãƒ¢ãƒã‚¤ãƒ«å‰æï¼‰                    |
| é€šçŸ¥åˆ¶å¾¡         | 1h1 ä»¶ãƒ»1 æ—¥ 3 ä»¶ï¼ãƒ¦ãƒ¼ã‚¶ãƒ¼                      |
| ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ | Supabase + Edge Functions ã§æ°´å¹³æ‹¡å¼µå¯èƒ½         |
| æ³•çš„éµå®ˆ         | Tabelogãƒ»Google ä¸¡ç¤¾è¦ç´„æº–æ‹ ï¼ˆä¿å­˜ãƒ»å†é…ä¿¡ç¦æ­¢ï¼‰ |

---

## 7ï¸âƒ£ ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ï¼ˆè¿½åŠ è¦ä»¶ï¼‰

### ğŸ§ª Phase 0: ãƒã‚¸ãƒƒã‚¯ã‚¤ãƒ³ãƒ“ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆE2E Testingï¼‰

**é‡è¦åº¦**: æœ€é«˜ (Critical)

**ã‚·ãƒŠãƒªã‚ª**: æœªç™»éŒ²ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒURLã‚’è¸ã‚€ â†’ èªè¨¼ â†’ è‡ªå‹•çš„ã«ã€Œã¤ãªãŒã‚Šã€ã¨ã€Œå‚åŠ ã€ãŒDBã«ä½œæˆã•ã‚Œã‚‹ã“ã¨ã‚’æ¤œè¨¼ã€‚

**Tool**: Playwright (Multiple contexts used to simulate Inviter and Guest)

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¾‹**:
```typescript
test('æ‹›å¾…URLã‹ã‚‰å‚åŠ ã™ã‚‹ã¨è‡ªå‹•çš„ã«ã¤ãªãŒã‚ŠãŒä½œæˆã•ã‚Œã‚‹', async () => {
  // 1. å¹¹äº‹ãŒã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ â†’ æ‹›å¾…URLç”Ÿæˆ
  // 2. æœªç™»éŒ²ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒURLè¸ã‚€ â†’ èªè¨¼
  // 3. connections, participants ãƒ†ãƒ¼ãƒ–ãƒ«ã«ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’æ¤œè¨¼
});
```

---

### ğŸ¶ Phase 3: DeepSeeké€£æºï¼ˆIntegration Testingï¼‰

**Mocking**: å¤–éƒ¨API (DeepSeek) ã¯ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ¯ã«å©ã‹ãšã€MSW (Mock Service Worker) ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ãƒ¢ãƒƒã‚¯ã™ã‚‹ã€‚

**æ¤œè¨¼**: Non-PIIãƒ‡ãƒ¼ã‚¿ï¼ˆåº—åãƒ»ã‚¨ãƒªã‚¢ç­‰ï¼‰ã®ã¿ãŒé€ä¿¡ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’æ¤œè¨¼ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’å«ã‚ã‚‹ã€‚

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¾‹**:
```typescript
test('åº—èˆ—æ¨è–¦APIãŒNon-PIIæƒ…å ±ã®ã¿ã‚’é€ä¿¡ã™ã‚‹', async () => {
  // ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã«user_idã‚„å€‹äººæƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ãªã„ã“ã¨ã‚’æ¤œè¨¼
  expect(requestBody).not.toHaveProperty('user_id');
  expect(requestBody).toHaveProperty('area');
  expect(requestBody).toHaveProperty('budget');
});
```

---

### ğŸ’° Phase 5: ç²¾ç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼ˆUnit Testingï¼‰

**é‡è¦åº¦**: æœ€é«˜ (Critical - Money involved)

**æ‰‹æ³•**: ç´”ç²‹é–¢æ•°ã¨ã—ã¦åˆ‡ã‚Šå‡ºã—ãŸ `calculateSettlement()` ã«å¯¾ã—ã€ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ï¼ˆå‰²ã‚Šå‹˜ä¸å¯ã®é‡‘é¡ã€0å††å‚åŠ è€…ã€å‚¾æ–œæœ€å¤§ãªã©ï¼‰ã‚’å«ã‚€100ãƒ‘ã‚¿ãƒ¼ãƒ³ä»¥ä¸Šã®å˜ä½“ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã€‚

**ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¾‹**:
```typescript
describe('calculateSettlement', () => {
  test('3äººã§å‰²ã‚Šå‹˜ï¼ˆå‚¾æ–œãªã—ï¼‰', () => {
    const result = calculateSettlement([5000, 5000, 5000], {});
    expect(result).toEqual([]);
  });

  test('1äººãŒ0å††å‚åŠ ã€æ®‹ã‚Š2äººã§å‰²ã‚Šå‹˜', () => {
    const result = calculateSettlement([6000, 6000, 0], {});
    expect(result).toHaveLength(2);
    expect(result[0].amount).toBe(2000);
  });

  test('å‚¾æ–œè¨­å®š: å…ˆè¼©1.5å€ã€å¾Œè¼©0.5å€', () => {
    const result = calculateSettlement(
      [10000, 10000, 10000],
      { inclinations: { user1: 1.5, user2: 0.5, user3: 1.0 } }
    );
    // è¨ˆç®—çµæœã‚’æ¤œè¨¼
  });
});
```

---

## 8ï¸âƒ£ ä»Šå¾Œã®æŠ€è¡“èª²é¡Œ

| ã‚«ãƒ†ã‚´ãƒª        | æ¤œè¨å†…å®¹                                         |
| --------------- | ------------------------------------------------ |
| åº—äºˆç´„ API é€£æº | TableCheck / Retty API èª¿æŸ»                      |
| AI æ¨è–¦æ”¹å–„     | é–¢ä¿‚ã‚°ãƒ©ãƒ• + è¡Œå‹•ãƒ‡ãƒ¼ã‚¿å­¦ç¿’ã«ã‚ˆã‚‹æ¨è–¦ç²¾åº¦å‘ä¸Š    |
| ç²¾ç®—è‡ªå‹•åŒ–      | PayPay API å¯¾å¿œã§å®Œçµå‹é€é‡‘                      |
| è‡ªå¾‹åˆ†æ•£é–‹å‚¬    | å¹¹äº‹ãƒ¬ã‚¹é–‹å‚¬ãƒ­ã‚¸ãƒƒã‚¯ã®ç ”ç©¶                       |
| Graph æ§‹é€ åŒ–    | ã€Œèª°ã¨ã©ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ã§ç¹‹ãŒã‚Œã‚‹ã‹ã€ã‚’å‹•çš„æ›´æ–° |

---

**version:** 1.1 (Tech Spec with Phase 0, DeepSeek V3, and Testing Strategy)
**authors:** ãŠå‰ã•ã‚“ Ã— Claude
**date:** 2025-11-21
